<?php
/** @var B3it_Solr_Block_Result_Product $this */
$product = $this->getProduct();
$id = $product->getEntityId();
$name = $product->getName();
$url = $product->getProductUrl();
?>

<li class="item">

    <div class="product-name">
        <a href="<?= $url; ?>" title="<?= htmlentities($name); ?>"><?= $name; ?></a>
    </div>
    <div class="product-list-image">
        <a class="product-image" href="<?= $url; ?>">
            <img id="product-collection-image-<?= $id; ?>"
                 src="<?= Mage::helper('catalog/image')->init($product, 'small_image')->keepFrame(false)->resize(300); ?>"
                 alt="<?= $product->getImageLabel(); ?>" />
        </a>
    </div><div class="product-list-description">
        <?= $product->getShortDescription(); ?>
    </div><div class="product-list-action">
        <div class="product-price">
            <?php if ($this->checkPrice()): ?>
                <?= $this->getPriceHtml($product, true) ?>
            <?php endif; ?>
        </div>
        <?php if(!$product->canConfigure() && $product->isSaleable()): ?>
            <button type="button"
                    title="<?= $this->quoteEscape($this->__('Add to Cart')) ?>"
                    class="button btn-cart egov-cart"
                    onclick="setLocation('<?= $this->getAddToCartUrl($product) ?>')">
                                <span>
                                    <?= $this->__('Add to Cart') ?>
                                </span>
            </button>
        <?php elseif($product->getStockItem() && $product->getStockItem()->getIsInStock()): ?>
            <a title="<?= $this->quoteEscape($this->__('View Details')) ?>"
               class="button egov-view"
               href="<?= $url ?>">
                                <span>
                                    <?= $this->__('View Details') ?>
                                </span>
            </a>
        <?php else: ?>
            <p class="action availability out-of-stock"><span><?= $this->__('Out of stock') ?></span></p>
        <?php endif; ?>
    </div>
</li>


