<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_blank
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<div class="my-wishlist">
	<div class="page-title">
    	<h2><?php echo $this->htmlEscape($this->getHeader()) ?></h2>
	</div>
	<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
	<?php if($this->hasWishlistItems()): ?>
	<form action="<?php echo $this->getUrl('*/*/update') ?>" method="post">
        <fieldset>
    	<table class="data-table" id="wishlist-table">
    	<col width="130" />
    	<col />
    	<col width="130" />
    	<thead>
        	<tr>
            	<th><?php echo $this->__('Product') ?></th>
            	<th><?php echo $this->__('Comment') ?></th>
            	<th>&nbsp;</th>
        	</tr>
    	</thead>
	    <tbody>
	        <?php foreach($this->getWishlistItems() as $item): ?>
	        <?php
            	$product = $item->getProduct();
                $isVisibleProduct = $product->isVisibleInSiteVisibility();
            ?>
	        <tr>
	            <td>
	                <a class="product-image" href="<?php echo $this->getProductUrl($item) ?>" title="<?php echo $this->htmlEscape($product->getName()) ?>">
	                    <img src="<?php echo $this->helper('catalog/image')->init($product, 'small_image')->resize(113, 113); ?>" width="113" height="113" alt="<?php echo $this->htmlEscape($product->getName()) ?>"/>
	                </a>
	                <h3 class="product-name"><a href="<?php echo $this->getProductUrl($item) ?>" title="<?php echo $this->htmlEscape($product->getName()) ?>"><?php echo $this->htmlEscape($product->getName()) ?></a></h3>
	                <?php echo $this->getPriceHtml($product) ?>
	                <?php echo $this->getDetailsHtml($item) ?>
	            </td>
	            <td><?php echo $this->getEscapedDescription($item) ?></td>
	            <td class="a-center">
	                <?php if($product->isSaleable()): ?>
	                	<?php if ($isVisibleProduct): ?>
	                		<a href="<?php echo $this->getSharedItemAddToCartUrl($item) ?>" class="egovsbutton" title="<?php echo $this->__('Add to Cart') ?>"><span><?php echo $this->__('Add to Cart') ?></span></a>
	                	<?php endif;?>
	                <?php endif;?>
	                <p><a href="<?php echo $this->getAddToWishlistUrl($item) ?>" class="egovsbutton"><span><?php echo $this->__('Add to Wishlist') ?></span></a></p>
	            </td>
	        </tr>
	        <?php endforeach ?>
	    </tbody>
    	</table>
    	<script type="text/javascript">decorateTable('wishlist-table');</script>
        </fieldset>
    	<div class="buttons-set">
    	<p class="back-link"><a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>"><small>&laquo; </small><?php echo $this->__('Back') ?></a></p>
    	<?php if($this->isSaleable()):?>
    		<a href="<?php echo $this->getUrl('*/*/allcart', array('_current'=>true)) ?>" class="egovsbutton" title="<?php echo $this->__('Add All to Cart') ?>"><span><?php echo $this->__('Add All to Cart') ?></span></a>
    	<?php endif;?>
    	</div>    	
	</form>
	<?php else: ?>
    	<p><?php echo $this->__('Wishlist is empty now.') ?></p>
	<?php endif ?>
</div>